# Mock Data for People Table

This directory contains mock data for the People table in Airtable.

## Files

- **`people-mock-data.json`** - 485 mock records in JSON format
- **`people-mock-data.csv`** - 485 mock records in CSV format (ready for Airtable import)
- **`people-schema.json`** - The actual schema from your Airtable People table
- **`bed-types.json`** - The bed types from your Airtable "Bed Types + Capacity" table (with Active status)
- **`bed-types-schema.json`** - Schema from the Bed Types + Capacity table
- **`providers.json`** - The providers/shelters from your Airtable Providers table
- **`providers-schema.json`** - Schema from the Providers table
- **`dashboard-overview-schema.json`** - Schema from the Dashboard Overview table
- **`dashboard-overview-data.json`** - Aggregate statistics from the Dashboard Overview table

## Data Overview

### Records Generated: 485

**Key Updates:**
- **260 people (53.6%)** are Status="In Shelter" with assigned shelters and bed types
- **Only Active bed types** are used (12 out of 13 total bed types)
- **Shelter assignments** are based on bed type availability and provider capacity
- Each person "In Shelter" is assigned to a specific provider and occupying a specific bed type

### Records Generated: 485

### Status Distribution

- **In Shelter**: 260 people (53.6%) - Currently placed in a shelter with assigned provider and bed type
- **Unhoused**: ~161 people (33.2%) - Not in permanent housing or shelter
- **Exited to Housing**: ~41 people (8.5%) - Successfully housed
- **Other Exit**: ~23 people (4.7%) - Other reasons for exit

### Field Details

- **Full Name**: Mix of male and female names (35% Hispanic surnames, with at least 10 duplicate full names)
- **Date of Birth**: Ages 16-90
- **Phone**: All numbers start with `505-555-XXXX`
- **Email**: Format: `firstname_lastname@example.com`
- **Bed Types Needed**: 1-3 bed type **IDs** (comma-separated format: `"rec123, rec456"`) based on demographics, **Active bed types only**
- **Status**: "In Shelter" (260), "Unhoused", "Exited to Housing", or "Other Exit"
- **Shelter**: Provider record ID (only for "In Shelter" status) - which shelter they are currently in
- **Bed Type**: Single bed type ID (only for "In Shelter" status) - the specific bed they are occupying
- **Notes**: Realistic case notes (1-3 sentences per person)
- **Pets**: ~33% have pets (checkbox)
- **Pet name(s) and species**: Names and species for those with pets
- **Vehicle**: ~33% have vehicles (checkbox)
- **Vehicle Details**: Vehicle type and condition
- **VI Score**: 70-99 (only for "In Shelter" status)
- **UniteUs**: 33% are in UniteUs
- **HMIS**: 21% are in HMIS
- **Mailing Address**: 39% have a mailing address
- **Employed**: 18% are employed
- **ADA Accommodations**: ~15% need accommodations (1-2 types)
- **Housing Preference**: Varied (60% seeking shelter, 10% prefer vehicle, 8% unsheltered by choice)
- **Needs Medical Respite**: ~24% need medical respite
- **Date Added**: Spread across 2025

### Bed Type Assignment Logic

Bed types are assigned as **record IDs** in Airtable's CSV import format:

**CSV Format**: `"rec123, rec456, rec789"` (comma-separated IDs with spaces within quotes)
**JSON Format**: `["rec123", "rec456", "rec789"]` (array of ID strings)

**Important**: Only **Active bed types** are used (12 out of 13 total). "Congregate Overflow" is excluded as it's not marked Active.

Logic based on demographics:

- **Gender + Medical**: 
  - Men needing medical care → "Medical Respite – Men"
  - Women needing medical care → "Medical Respite – Women"
- **Gender-Specific**:
  - Men → "Adult Men – Dormitory" or General beds
  - Women → "Women's Beds" or General beds
- **Age**: Older adults (60+) → Medical Respite (gender-appropriate)
- **Family Status**: 10% assigned to Family Suites (High/Low Barrier) or Family Rooms
- **Domestic Violence**: 5% assigned to "DV Shelter Beds (Shared Bedrooms)"
- **Flexibility**: 40% also accept Overflow beds ("Congregate Overflow" or "Non-Congregate Units")

### Shelter Placement Logic (for "In Shelter" status)

For the 260 people with Status="In Shelter":

1. **Bed Type Selection**: Randomly select ONE bed type from their "Bed Types Needed" list
2. **Provider Match**: Find which provider(s) offer that bed type
3. **Capacity Check**: Assign to provider with available capacity (soft cap of ~60 per provider)
4. **Fallback**: If provider is full, try different bed type from their list
5. **Assignment**: Set both "Shelter" (provider ID) and "Bed Type" (occupied bed ID)

**Result**: 226 out of 260 "In Shelter" people successfully assigned (34 had no matching bed types/providers)

**Provider Distribution** (from latest generation):
- Agape: 63 people
- Casa Familia: 53 people
- Consuelo's Place: 47 people
- Men's Shelter: 29 people
- Arroyo Chamiso: 28 people
- Esperanza: 6 people
- Interfaith Community Shelter: 0 people

### Excluded Fields

- **Person ID**: Auto-generated by Airtable formula
- **Providers**: Lookup field (skip for import)
- **Waitlist**: Linked records (skip for import)

## How to Import into Airtable

### Method 1: CSV Import (Recommended)

1. Open your Airtable base
2. Go to the People table
3. Click the dropdown arrow next to the table name
4. Select "Import data" > "CSV file"
5. Upload `people-mock-data.csv`
6. Map the columns to your fields (should auto-match)
7. Click "Import"

**Important Notes**:
- **Bed Types Needed** are stored as record IDs (e.g., `"rec123, rec456"`) which Airtable will automatically link
- **Shelter** and **Bed Type** are also record IDs that will link to Providers and Bed Types tables
- Airtable will auto-generate `Person ID` based on your formula field
- The import recognizes comma-separated IDs and creates the proper linked records
- Only Active bed types are included in the data

### Method 2: Copy-Paste from CSV

1. Open `people-mock-data.csv` in Excel or Google Sheets
2. Select all data (including headers)
3. Copy
4. In Airtable, select the first empty cell in the Full Name column
5. Paste
6. Confirm the import

### Method 3: Using the JSON file

Use the JSON file if you're building an import script with the Airtable API:

```javascript
const people = require("./people-mock-data.json");

// Example: Import using Airtable.js
people.forEach(async (person) => {
  await peopleTable.create(person);
});
```

## Dashboard Overview Data

The `dashboard-overview-data.json` file contains aggregate statistics pulled from Airtable's Dashboard Overview table:

- **Population Stats**: Total people, currently unhoused, placed, exited to housing, other exits
- **Current Needs**: Seeking shelter, needs medical respite, has pets, has vehicle, needs ADA
- **Bed Availability**: Supply vs demand for each bed type
- **System Coverage**: In UniteUs, in HMIS, has mailing address, employed

To refresh the dashboard data:

```bash
node scripts/fetch-dashboard-overview.js
```

This data is automatically fetched in the Next.js app via the `/api/dashboard` route and displayed on the homepage.

## Regenerating Mock Data

To regenerate the mock data with different values:

```bash
node scripts/generate-mock-people.js
```

This will create new random data following the same distribution rules.

## Statistics from Current Dataset

Run the generation script to see statistics like:

- Total records
- Status distribution (count & percentage)
- Percentage with pets
- Percentage with vehicles
- Percentage with VI scores
